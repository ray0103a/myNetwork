<!DOCTYPE html>
<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- レスポンシブ user-scalable(拡大の許可)-->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes">
    
    <!-- quaggaJSの読み込み -->
    <script type="text/javascript" src="https://serratus.github.io/quaggaJS/examples/js/quagga.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

<style>

.outer{
  text-align: center;
}
.barWrapper{
  position: relative;
  background-color: rgb(0, 0, 0);
  display: none;
  border-radius: 10px;
  padding: 0px;
  border: solid 3px rgb(0, 0, 0);
}

.barPreview{
  position: absolute;     /* 親に対する絶対配置 */
  border-radius: 10px;
  margin: 0px;
  padding: 0px;
  left: 0;
  border: solid 6px rgb(255, 255, 255);

  box-sizing: border-box; /* box-sizingのborder-box指定によって (borderもwidth,heightの幅に含める) */
  width:100%;             /* 100%によって親要素とサイズが一致す */
  height: 100%;           /* 100%によって親要素とサイズが一致す */
  
  display: none;          /* 初期表示オフ*/
  pointer-events: none;   /* クリックしてもイベントが起きなくなる */
}

.videoBarcode{
  position: absolute;
  border-radius: 10px;
  margin: 0px;
  padding: 0px;
  left: 0;
  border: solid 6px rgb(255, 255, 255);
  box-sizing: border-box;
  width:100%;
  height: 100%;
  display: none;
  pointer-events: none;
}

.offButton{
  position: absolute;

  bottom: 0px;
  right: 0;
  left: 0;
  margin: auto;

  width: 50px;
  height: 50px;
  padding: 5px 0 0 0;
  border-radius: 50%;
  border-width: 3px;
  background-color: rgb(241, 135, 135);
  
  /*height: 3.2rem;*/
  display: none;
  /*z-index: 9;*/
  /*pointer-events: none;*/ /*クリックイベントを無効にしたい場合はコメントイン*/
  
}

.cameraButton{
  width: 50px;
  height: 50px;
  padding: 5px 0 0 0;
  border-radius: 10%;
  border-width: 2px;
  background-color: rgb(247, 220, 147);
}

.box10 {
    padding: 0.5em 1em;
    margin: 2em 0;
    color: #00BCD4;
    background: #e4fcff;/*背景色*/
    border-top: solid 6px #1dc1d6;
    box-shadow: 0 3px 4px rgba(0, 0, 0, 0.32);/*影*/
    width: 320px;
}
.box10 p {
    margin: 0; 
    padding: 0;
}


</style>
  <!-- Google マテリアルアイコン -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
  <!-- カメラ表示部 -->
  <div class="outer">
    <div id="barWrapper" class="barWrapper">
      <video id="videoBarcode" class="videoBarcode" muted autoplay playsinline></video>
      <canvas id="barPreview" class="barPreview"></canvas>
      <!--<canvas id="tmp"></canvas>-->
      <button id="offButton" class="offButton" onclick="OffButtonClick();"><i class="material-icons">close</i></button>
    </div>
  </div>
  <button class="cameraButton" onclick="scanBarcode();"><i class="material-icons">camera_enhance</i></button>
  <button class="cameraButton" onclick="startCamera();"><i class="material-icons">settings</i></button>
  <textarea id="jan" rows="8" cols="40"></textarea>



  <script>
    function OffButtonClick() {
      document.getElementById("barWrapper").style.display = "none";
      document.getElementById("videoBarcode").style.display = "none";
      document.getElementById("barPreview").style.display = "none";
      document.getElementById("offButton").style.display = "none";

      clearInterval(intervalHandler);
      videoBarcode.pause();
    }
  </script>

  <script src="/javascripts/barcode.js"></script>

</body>
</html>